/*============================================================================*/
/* DBMS: MySql 5*/
/* Created on : 25-Jul-18 8:44:05 PM                                           */
/*============================================================================*/


/*============================================================================*/
/*                                  TABLES                                    */
/*============================================================================*/
CREATE TABLE `COMMUNITIES` (
  `COMMUNITYID`                   INTEGER(10) NOT NULL,
  `NAME`                          TEXT NOT NULL,
  `LOCATIONID`                    INTEGER(10),
  `SECTIONID`                     INTEGER(10),
CONSTRAINT `PK_COMMUNITIES` PRIMARY KEY (`COMMUNITYID`)
);

CREATE TABLE `BLOCKS` (
  `BLOCKID`         INTEGER(10) NOT NULL,
  `NAME`            TEXT,
  `APARTMENTID`     INTEGER(10),
CONSTRAINT `PK_BLOCKS` PRIMARY KEY (`BLOCKID`)
);

CREATE TABLE `UNITS` (
  `UNITID`          INTEGER(10) NOT NULL,
  `IDENTIFIER`      TEXT,
  `BLOCKID`         INTEGER(10),
  `OWNERID`         INTEGER(10),
  `MAINTAINENCE_FEE_STATUS` BOOL,
CONSTRAINT `PK_UNITS` PRIMARY KEY (`UNITID`)
);

CREATE TABLE `LOCATIONS` (
  `LOCATIONID`      INTEGER(10) NOT NULL,
  `ADDRESSLINE1`    TEXT,
  `ADDRESSLINE2`    TEXT,
  `LOCALITY`        TEXT,
  `PINCODE`         TEXT,
  `MAPCORDINATES`   TEXT,
  `COUNTRYID`       INTEGER(10),
  `STATEID`         INTEGER(10),
  `CITYID`          INTEGER(10),
CONSTRAINT `PK_LOCATIONS` PRIMARY KEY (`LOCATIONID`)
);

CREATE TABLE `CONTACTS` (
  `CONTACTID`       INTEGER(10) NOT NULL,
  `FIRSTNAME`       TEXT,
  `LASTNAME`        TEXT,
  `PHONE`           INTEGER(10),
  `LOCATIONID`      INTEGER(10),
  `IMAGE`           BLOB,
CONSTRAINT `PK_CONTACTS` PRIMARY KEY (`CONTACTID`)
);

CREATE TABLE `AMENITIES` (
  `AMENITYID`       INTEGER(10) NOT NULL,
  `NAME`            TEXT,
  `DESCRIPTION`     TEXT,
  `APARTMENTID`     INTEGER(10),
CONSTRAINT `PK_AMENITIES` PRIMARY KEY (`AMENITYID`)
);

CREATE TABLE `TENANTS` (
  `TENANTID`        INTEGER(10) NOT NULL,
  `CONTACTID`       INTEGER(10),
  `UNITID`          INTEGER(10),
  `PRIMARY`         BOOL,
CONSTRAINT `PK_TENANTS` PRIMARY KEY (`TENANTID`)
);

CREATE TABLE `AMENITYTENANT` (
  `AMENITYTENANTID` INTEGER(10) NOT NULL,
  `AMENITYID`       INTEGER(10),
  `TENANTID`        INTEGER(10),
  `ACTIVE`          BOOL,
  `START_DATE`      DATETIME,
  `END_DATE`        DATETIME,
CONSTRAINT `PK_AMENITYTENANT` PRIMARY KEY (`AMENITYTENANTID`)
);

CREATE TABLE `ASSOCIATIONS` (
  `ASSOCIATIONID`   INTEGER(10) NOT NULL,
CONSTRAINT `PK_ASSOCIATIONS` PRIMARY KEY (`ASSOCIATIONID`)
);

CREATE TABLE `MEMBERS` (
  `MEMBERID`        INTEGER(10) NOT NULL,
  `ASSOCIATIONID`   INTEGER(10),
  `CONTACTID`       INTEGER(10),
  `ROLE`            TEXT,
CONSTRAINT `PK_MEMBERS` PRIMARY KEY (`MEMBERID`)
);

CREATE TABLE `LEDGERENTRIES` (
  `ENTRYID`         INTEGER(10) NOT NULL,
  `DESCRIPTION`     TEXT,
  `TYPE`            TEXT,
  `AMOUNT`          DOUBLE(16,1),
  `ASSOCIATIONID`   INTEGER(10),
  `ENTRY_DATE`      DATETIME,
CONSTRAINT `PK_LEDGERENTRIES` PRIMARY KEY (`ENTRYID`)
);

CREATE TABLE `TRANSACTIONS` (
  `TRANSACTIONID`   INTEGER(10) NOT NULL,
  `DATE`            DATETIME,
  `AMOUNT`          DOUBLE(16,1),
  `DESCRIPTION`     TEXT,
  `CONTACTID`       INTEGER(10),
  `UNITID`          INTEGER(10),
CONSTRAINT `PK_TRANSACTIONS` PRIMARY KEY (`TRANSACTIONID`)
);

CREATE TABLE `COUNTRIES` (
  `COUNTRYID`       INTEGER(10) NOT NULL,
  `NAME`            TEXT,
  `CODE`            TEXT,
CONSTRAINT `PK_COUNTRIES` PRIMARY KEY (`COUNTRYID`)
);

CREATE TABLE `STATES` (
  `STATEID`         INTEGER(10) NOT NULL,
  `NAME`            TEXT,
CONSTRAINT `PK_STATES` PRIMARY KEY (`STATEID`)
);

CREATE TABLE `CITIES` (
  `CITYID`          INTEGER(10) NOT NULL,
  `NAME`            INTEGER(10),
  `CODE`            INTEGER(10),
CONSTRAINT `PK_CITIES` PRIMARY KEY (`CITYID`)
);

CREATE TABLE `REGIONS` (
  `REGIONID`        INTEGER(10) NOT NULL,
  `NAME`            TEXT,
CONSTRAINT `PK_REGIONS` PRIMARY KEY (`REGIONID`)
);

CREATE TABLE `SECTIONS` (
  `SECTIONID`       INTEGER(10) NOT NULL,
  `NAME`            TEXT,
  `REGIONID`        INTEGER(10),
CONSTRAINT `PK_SECTIONS` PRIMARY KEY (`SECTIONID`)
);

/*============================================================================*/
/*                               FOREIGN KEYS                                 */
/*============================================================================*/
ALTER TABLE `COMMUNITIES`
    ADD CONSTRAINT `FK_REFERENCE_4`
        FOREIGN KEY (`LOCATIONID`)
            REFERENCES `LOCATIONS` (`LOCATIONID`)
 ;

ALTER TABLE `COMMUNITIES`
    ADD CONSTRAINT `FK_REFERENCE_23`
        FOREIGN KEY (`SECTIONID`)
            REFERENCES `SECTIONS` (`SECTIONID`)
 ;


ALTER TABLE `BLOCKS`
    ADD CONSTRAINT `FK_REFERENCE_2`
        FOREIGN KEY (`APARTMENTID`)
            REFERENCES `COMMUNITIES` (`COMMUNITYID`)
 ;


ALTER TABLE `UNITS`
    ADD CONSTRAINT `FK_REFERENCE_6`
        FOREIGN KEY (`OWNERID`)
            REFERENCES `CONTACTS` (`CONTACTID`)
 ;

ALTER TABLE `UNITS`
    ADD CONSTRAINT `FK_REFERENCE_3`
        FOREIGN KEY (`BLOCKID`)
            REFERENCES `BLOCKS` (`BLOCKID`)
 ;


ALTER TABLE `LOCATIONS`
    ADD CONSTRAINT `FK_REFERENCE_20`
        FOREIGN KEY (`COUNTRYID`)
            REFERENCES `COUNTRIES` (`COUNTRYID`)
 ;

ALTER TABLE `LOCATIONS`
    ADD CONSTRAINT `FK_REFERENCE_21`
        FOREIGN KEY (`STATEID`)
            REFERENCES `STATES` (`STATEID`)
 ;

ALTER TABLE `LOCATIONS`
    ADD CONSTRAINT `FK_REFERENCE_22`
        FOREIGN KEY (`CITYID`)
            REFERENCES `CITIES` (`CITYID`)
 ;


ALTER TABLE `CONTACTS`
    ADD CONSTRAINT `FK_REFERENCE_5`
        FOREIGN KEY (`LOCATIONID`)
            REFERENCES `LOCATIONS` (`LOCATIONID`)
 ;


ALTER TABLE `AMENITIES`
    ADD CONSTRAINT `FK_REFERENCE_12`
        FOREIGN KEY (`APARTMENTID`)
            REFERENCES `COMMUNITIES` (`COMMUNITYID`)
 ;


ALTER TABLE `TENANTS`
    ADD CONSTRAINT `FK_REFERENCE_10`
        FOREIGN KEY (`CONTACTID`)
            REFERENCES `CONTACTS` (`CONTACTID`)
 ;

ALTER TABLE `TENANTS`
    ADD CONSTRAINT `FK_REFERENCE_11`
        FOREIGN KEY (`UNITID`)
            REFERENCES `UNITS` (`UNITID`)
 ;


ALTER TABLE `AMENITYTENANT`
    ADD CONSTRAINT `FK_REFERENCE_13`
        FOREIGN KEY (`AMENITYID`)
            REFERENCES `AMENITIES` (`AMENITYID`)
 ;

ALTER TABLE `AMENITYTENANT`
    ADD CONSTRAINT `FK_REFERENCE_14`
        FOREIGN KEY (`TENANTID`)
            REFERENCES `TENANTS` (`TENANTID`)
 ;


ALTER TABLE `MEMBERS`
    ADD CONSTRAINT `FK_REFERENCE_15`
        FOREIGN KEY (`ASSOCIATIONID`)
            REFERENCES `ASSOCIATIONS` (`ASSOCIATIONID`)
 ;

ALTER TABLE `MEMBERS`
    ADD CONSTRAINT `FK_REFERENCE_16`
        FOREIGN KEY (`CONTACTID`)
            REFERENCES `CONTACTS` (`CONTACTID`)
 ;


ALTER TABLE `LEDGERENTRIES`
    ADD CONSTRAINT `FK_REFERENCE_17`
        FOREIGN KEY (`ASSOCIATIONID`)
            REFERENCES `ASSOCIATIONS` (`ASSOCIATIONID`)
 ;


ALTER TABLE `TRANSACTIONS`
    ADD CONSTRAINT `FK_REFERENCE_18`
        FOREIGN KEY (`CONTACTID`)
            REFERENCES `CONTACTS` (`CONTACTID`)
 ;

ALTER TABLE `TRANSACTIONS`
    ADD CONSTRAINT `FK_REFERENCE_19`
        FOREIGN KEY (`UNITID`)
            REFERENCES `UNITS` (`UNITID`)
 ;


ALTER TABLE `SECTIONS`
    ADD CONSTRAINT `FK_REFERENCE_24`
        FOREIGN KEY (`REGIONID`)
            REFERENCES `REGIONS` (`REGIONID`)
 ;


